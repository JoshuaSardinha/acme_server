**Module: Document Types & Presets**

**REQ-DOCTYPE-001**

- **Requirement Type:** Data
- **Description:** The system MUST have a DocumentTypes table defining the main categories of documents. Each record MUST include:
  - id (Primary Key, UUID recommended)
  - name (Main type name, e.g., "Simple Document Scan", "List of Documents", "Generated Document", Unique)
  - description (Text description)
  - managed_by (Enum: 'DEVELOPER', default: 'DEVELOPER') \- Indicates these are centrally managed.
-
- **Rationale:** Establishes broad categories for document handling logic.
- **Acceptance Criteria:**
  - Database schema includes DocumentTypes table with specified fields.
  - Initial set of types ("Simple Document Scan", "List of Documents", "Generated Document") are seeded.
-
- **Priority:** Must Have
- **Standard/Reference:** Data Modeling Best Practices

**REQ-DOCTYPE-002**

- **Requirement Type:** Data
- **Description:** The system MUST have a DocumentTypePresets table defining specific examples or variations within a main Document Type. Each record MUST include:
  - id (Primary Key, UUID recommended)
  - document_type_id (Foreign Key referencing DocumentTypes, NOT NULL)
  - preset_name (Specific preset name, e.g., "Passport", "Birth Certificate", "Professional Plan", "I-140 Form", Unique)
  - description (Text description)
  - requires_client_upload (Boolean, indicates if client typically uploads a file for this preset)
  - is_list (Boolean, indicates if this preset represents a list/multiple documents, linked to "List of Documents" type)
  - is_generated (Boolean, indicates if this preset is typically generated by NN/Vendor/AI, linked to "Generated Document" type)
  - managed_by (Enum: 'DEVELOPER', default: 'DEVELOPER') \- Indicates these are centrally managed.
-
- **Rationale:** Provides specific, reusable document definitions used throughout the template configuration. Clarifies the expected nature of the document (uploaded, list, generated).
- **Acceptance Criteria:**
  - Database schema includes DocumentTypePresets table with specified fields and constraints.
  - Initial set of presets (Passport, Birth Certificate, Professional Plan, etc.) are seeded, linked to appropriate DocumentTypes.
-
- **Priority:** Must Have
- **Standard/Reference:** Data Modeling Best Practices

**REQ-DOCTYPE-003**

- **Requirement Type:** Data
- **Description:** The system MUST link Document Type Presets to the central Data Points they _typically_ involve using a DocumentPresetDataPointLinks table. This defines the standard inputs/outputs associated with a document type. Each record MUST include:
  - id (Primary Key)
  - preset_id (FK to DocumentTypePresets, NOT NULL)
  - data_point_id (FK to DataPoints, NOT NULL)
  - direction (Enum: 'INPUT', 'OUTPUT') \- Indicates if this data point is typically an input or output _for this preset_.
  - is_primary_output (Boolean, default: false) \- If direction is 'OUTPUT', indicates if this is the main document file/data itself (e.g., the generated PDF, the scanned passport file). A preset should have typically one primary output.
-
- **Rationale:** Links document presets to their standard data elements defined centrally in DataPoints, clarifying the typical I/O relationship. Replaces the previous DocumentPresetDataPoints. Task models will specify their exact requirements.
- **Acceptance Criteria:**
  - Database schema includes DocumentPresetDataPointLinks table.
  - Links are established for initial presets (e.g., Passport preset linked to DataPoints for passport number, expiry date, file reference output, etc.).
-
- **Priority:** Must Have
- **Standard/Reference:** Data Modeling Best Practices
